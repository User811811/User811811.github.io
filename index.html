<!DOCTYPE html>
<html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WNRSPDK4');</script>
  <!-- End Google Tag Manager -->
  
  <!-- Random Alphanumeric Generator -->
  <script>
    function generateRandom(length) {
      const alphanumericCharacters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      let randomSequence = '';
      for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * alphanumericCharacters.length);
        randomSequence += alphanumericCharacters[randomIndex];
      }
      return randomSequence;
    }
  </script>
  <!-- End Random Alphanumeric Generator -->

  <!-- SHA1 Function -->
  <script>
    function SHA1(message) {
  // Constants defined in SHA-1 standard
  const h0 = 0x67452301;
  const h1 = 0xefcdab89;
  const h2 = 0x98badcfe;
  const h3 = 0x10325477;
  const h4 = 0xc01f3a35;

  // Pre-processing the message
  const messageBytes = utf8Encode(message);
  const bitLength = messageBytes.length * 8;
  const paddedMessage = padMessage(messageBytes, bitLength);
  const messageBlocks = chunkMessage(paddedMessage);

  // Hash calculation
  for (const block of messageBlocks) {
    const w = new Array(80);
    for (let i = 0; i < 16; i++) {
      w[i] = ((block[0 * 4 + i] << 24) |
               (block[1 * 4 + i] << 16) |
               (block[2 * 4 + i] << 8) |
               block[3 * 4 + i]);
    }

    for (let i = 16; i < 80; i++) {
      w[i] = rotateLeft(w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16], 1);
    }

    let a = h0;
    let b = h1;
    let c = h2;
    let d = h3;
    let e = h4;

    for (let i = 0; i < 80; i++) {
      const f = selectFunction(i);
      const k = constants[i];

      let temp = rotateLeft(a, 5) + f(b, c, d) + e + k + w[i];
      e = d;
      d = c;
      c = rotateLeft(b, 30);
      b = a;
      a = temp;
    }

    h0 += a;
    h1 += b;
    h2 += c;
    h3 += d;
    h4 += e;
  }

  // Convert hash to hex string
  const hash = [h0, h1, h2, h3, h4].map(value => value.toString(16)).join('');
  return hash;
}

// Utility functions

function utf8Encode(message) {
  const encoder = new TextEncoder('utf-8');
  return encoder.encode(message);
}

function padMessage(message, bitLength) {
  const length = ((bitLength >> 9) + 1) * 4;
  const padding = new Uint8Array(length - message.length);

  for (let i = 0; i < padding.length; i++) {
    padding[i] = 0x80;
  }

  const paddedMessage = new Uint8Array(message.length + padding.length);
  paddedMessage.set(message);
  paddedMessage.set(padding, message.length);

  return paddedMessage;
}

function chunkMessage(paddedMessage) {
  const chunkSize = 512;
  const chunks = [];

  for (let i = 0; i < paddedMessage.length; i += chunkSize) {
    chunks.push(paddedMessage.slice(i, i + chunkSize));
  }

  return chunks;
}

function rotateLeft(value, n) {
  return ((value << n) | (value >>> (32 - n))) >>> 0;
}

function selectFunction(i) {
  if (i <= 19) {
    return (b, c, d) => (b & c) | (~b & d);
  } else if (i <= 39) {
    return (b, c, d) => b ^ c ^ d;
  } else if (i <= 59) {
    return (b, c, d) => (b & d) | (c & ~d);
  } else if (i <= 79) {
    return (b, c, d) => b ^ c ^ d;
  }
}

  </script>
  <!-- End SHA1 Function -->
  
  <title>Jason's Test Store</title>
  <link rel="stylesheet" href="styles.css">

  <script>
    //const dl_oid = generateRandom(8);
    document.getElementById("a").innerHTML = generateRandom(8);
    
    const dl_customerid = generateRandom(12);
    document.getElementById("b").innerHTML = dl_customerid;
    
    const dl_customeremailnohash = generateRandom(20);
    const dl_customeremail = SHA1(dl_customeremailnohash);
    document.getElementById("c").innerHTML = dl_customeremail;
  </script> 
  
</head>
<body>
  
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WNRSPDK4"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <!-- Start of Header -->
  <header>
  <h1>Welcome to Jason's Online Store for Testing!</h1>
  </header>
  <!-- End of Header -->
  <!-- Start of Products -->
  <div class="product-container">
    <div class="product">
      <img src="/images/bakkieturbo.png" alt="Bakkie Turbo">
      <h3>Bakkie Turbo</h3>
      <p>Bit faster.</p>
      <span class="price">R1 200.00</span>
      <button class="buy-now">Buy Now</button>
    </div>

    <div class="product">
      <img src="/images/carturbo.png" alt="Car Turbo">
      <h3>Car Turbo</h3>
      <p>A lot faster.</p>
      <span class="price">R5 800.00</span>
      <button class="buy-now">Buy Now</button>
    </div>

    <div class="product">
      <img src="/images/sportsturbo.png" alt="Sports Turbo">
      <h3>Sports Turbo</h3>
      <p>The fastest.</p>
      <span class="price">R72 000.00</span>
      <button class="buy-now">Buy Now</button>
    </div>
  </div>
  <!-- End of Products -->
  <!-- Start of Variables -->
  <div class="product-container">
    <div class="product">
      <h3>OID</h3>
      <p id="a"></p>
    </div>

    <div class="product">
      <h3>Customer ID</h3>
      <p id="b"></p>
    </div>

    <div class="product">
      <h3>Customer Email</h3>
      <p id="c"></p>
    </div>
  </div>
  <!-- End of Variables -->
  <!-- Start of Footer -->
  <footer>
  <p>Copyright &copy; 2023 Jason Souma</p>
  </footer>
  <!-- End of Footer -->

</body>
</html>
